<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product</title>
    <style>
        #container{
            display: grid;
            grid-template-columns: repeat(4,1fr);
            grid-template-rows: auto;
            width: 80%;
            gap: 20px;
            margin: auto;
        }
        #container img {
            width: 100%;
            height: 200px;
        }
        #container div {
            box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div id="container"></div>
</body>

<script>

let addCart = JSON.parse(localStorage.getItem("cart")) || []
console.log(addCart)
    let container = document.getElementById("container")
    let array = []
    
    function fetchData(){
        fetch("https://fakestoreapi.com/products")
        .then(res => res.json())
        .then((data) => {
            console.log(data)
            array = data
            Append(data)
        })
    }
    fetchData()


    function Append(data){
        container.innerHTML = null

        data.map((item,ele) => {
            let div = document.createElement("div")

            let image = document.createElement("img")
            image.setAttribute("src", item.image)

            let title = document.createElement("h4")
            title.innerText = item.title.substring(0,20)

            let price= document.createElement("p")
            price.innerText = "$"+item.price

            let Add= document.createElement("button")
            Add.innerText = "ADD TO CART"

            Add.addEventListener("click", ()=> {
                
                let flag  = true
            for(let i=0; i<addCart.length; i++){
              if(addCart[i]["id"] == item.id){
                flag = false
              }
            }
            if(flag){
                addCart.push({...item,quantity:1})
          localStorage.setItem("cart", JSON.stringify(addCart))
          alert("Successfully Placed Order")
            }
            else{
              alert("Already Placed Order")
            }
            })

            div.append(image,title,price,Add)
            container.append(div)
        })
    }
















</script>
</html>